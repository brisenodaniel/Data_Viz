---
title: "Project 1"
author: "Daniel Briseno and Emily Daskas"
date: "10/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#require("dplyr")
tips_df = read.csv("./Data/tips.csv")

attach(tips_df)
```


### Research Question 1: 

**Examine the association between the total bill and tip.** 

How does this relationship change based on sex, smoker status, and the combination of the two (i.e. male smokers, female non-smokers, etc.)?

```{r pressure, echo = FALSE}
plot(TIP,TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main = "The Association between Tips and Total Bill")
```


We can see based on the "The Relationship between Tips and Total Bill" plot, seen above, that there is positive relationship between the amount of a tip and the total bill. This makes sense because tippers will generally tip somewhere around 15-20% of their total bill, so as their bill increases, their tip should too.



```{r, echo = FALSE}
smoker = tips_df[SMOKER==1,]
n_smoker =  tips_df[SMOKER==0,]
female = tips_df[SEX==1,]
male = tips_df[SEX==0,]

par(mfrow=c(1,2), oma=c(0,0,2,0))
smoker_plot = plot(smoker$TIP, smoker$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main= "Smokers")
n_smoker_plot = plot(n_smoker$TIP, n_smoker$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main= "Non-Smokers")
title("The Association between Tips and Total Bill Based on Smoking Status",outer = TRUE)

par(mfrow=c(1,2), oma=c(0,0,2,0))
female_plot = plot(female$TIP, female$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main= "Females")
male_plot = plot(male$TIP, male$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main= "Males")
title("The Association between Tips and Total Bill Based on Gender",outer = TRUE)

```


In the above plots, it looks as though when separated between different groups based on either smoking status or gender, there remains a positive relationship between tip amount and total bill. However, it seems as though that relationship is less clear in the smoking group. This could be because smoking is often associated with drinking. 


```{r, echo = FALSE}
m_smoker = tips_df[SEX==0 & SMOKER==1,]
f_smoker = tips_df[SEX==1 & SMOKER==1,]
m_nsmoker = tips_df[SEX==0 & SMOKER==0,]
f_nsmoker = tips_df[SEX==1 & SMOKER==0,]

par(mfrow=c(2,2), oma = c(0,0,2,0))
plot(m_smoker$TIP, m_smoker$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main = "Male Smokers")
plot(f_smoker$TIP, f_smoker$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main = "Female Smokers")
plot(m_nsmoker$TIP, m_nsmoker$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main = "Male Non-Smokers")
plot(f_nsmoker$TIP, f_nsmoker$TOTBILL, xlab = "Tip Amount", ylab = "Total Bill", main = "Female Non-Smokers")
title("The Association between Tips and Total Bill Among Different Groups",outer = TRUE)
```

Looking at the above graphs, it appears, again, that non-smokers have the most consistent tipping habits: the higher the bill, the more they tip. It appears that females are more likely to tip at a consistent rate, while males may taper off their tipping a bit the higher that the bill gets.


```{r, echo = FALSE}
boxplot((smoker$TIP/smoker$TOTBILL),(n_smoker$TIP/n_smoker$TOTBILL),
        names=c("smoker","nonsmoker"),outline=FALSE, main= "Percent of Tip to Total Bill of Smokers vs Non-Smokers") 
boxplot((female$TIP/female$TOTBILL),(male$TIP/male$TOTBILL),
        names=c("female",'male'), outline=FALSE,main= "Percent of Tip to Total Bill of Females vs Males") 
```


The boxplots above give us a more detailed picture of the relationships we described above. Smokers and Non smokers share the same median tip percent. However, If you are looking for the opportunity to get a chance at a high tip with respect to bill total, you may acheive that when you get a smoker. On the other hand, you are also more likely to get a lower tip from a smoker. If you want consistency, it is best to serve a non-smoker.

Females and Males also share the same average tip percent. Females will




```{r, echo = FALSE}
boxplot((m_smoker$TIP/m_smoker$TOTBILL),(f_smoker$TIP/f_smoker$TOTBILL),
        names=c("male smoker","female smoker"),outline=FALSE, main= "Percent of Tip to Total Bill of Male Smokers vs Female Smokers") 
boxplot((m_nsmoker$TIP/m_nsmoker$TOTBILL), (f_nsmoker$TIP/f_nsmoker$TOTBILL), 
        names=c("male nonsmoker","female nonsmoker"), outline=FALSE,main= "Percent of Tip to Total Bill of Male Non-Smokers vs Female Non-Smokers") 
```

### Research Question 2: 

**When are the best day and times to schedule a shift if you are looking to maximize tips?** 

```{r, echo = FALSE}
tips_df = na.omit(tips_df)
tipsD = tips_df[TIME == 0,]
tipsN = tips_df[TIME == 1,]

thurD = tipsD[tipsD$DAY==3,]$TIP
thurN = tipsN[tipsN$DAY==3,]$TIP
friD = tipsD[tipsD$DAY==4,]$TIP
friN = tipsN[tipsN$DAY==4,]$TIP
satD = tipsD[tipsD$DAY==5,]$TIP
satN = tipsN[tipsN$DAY==5,]$TIP
sunD = tipsN[tipsD$DAY==6,]$TIP
sunN = tipsN[tipsN$DAY==6,]$TIP

data = c(thurD,thurN,friD,friN,satD,satN,sunD,sunN)
colors = c("lightblue", "darkblue", "lightblue", "darkblue",  "lightblue", "darkblue", "lightblue", "darkblue")
spacing = c(1,2,4,5,7,8,10,11)
xLabels = c("Thursday, Day","Thursday, Night", "Friday, Day", "Friday, Night", "Saturday, Day", "Saturday, Night", "Sunday, Day", 'Sunday, Night') 

boxplot(thurD,thurN,friD,friN,satD,satN,sunD,sunN, 
        col = colors, 
        at= spacing, 
        names= xLabels,
        cex.axis = .8, 
        las = 2,
        outline=FALSE, main="Best Time to be Scheduled for a Shift",
      xlab="Shift", ylab="Tip Amount")
legend("topleft", legend = c("Day Shift","Night Shift"), 
    col = c("lightblue" ,"darkblue") , bty = "n", pch=20 , pt.cex = 2, cex = .8, horiz = FALSE, inset = c(0.03, 0.01))

```


The above boxplots tell us which shifts are optimal for if you desire to earn the most tips. This does not take into account the total bill amount, because if a server soley cares about tips, they will care less about how generous of a tip a party gives and more about the total tips they are able to generate during their shift, reguardless of how much a party's total bill is. 

Looking at this graph, it is clear that that the night shifts (dark blue), are the top three shifts that can be picked up, according to this measure. Interestingly, Saturday and Sunday day shifts did not get any customers, and Thursday night only had one, so, these shift are definitely not desired. Friday was the only day where enough customers came in during both shifts to be able to distunguigh which shift was better, and it is evident that Friday night generates higher tips than Friday day. 

There could be several contributing factors to the weekend getting higher tips than weekdays. One of them is that people often drink on weekends, and people who drink will likely be more generous tippers. Also, adding drinks to a bill will increase the total bill, and as we saw in our above reseaerch question, higher bills usual equate to higher tips. Larger parties on the weekends will also equate to a larger bills, and thus, larger tips. 

The reason we may see a differnce in day vs night tips is likely, again, the drinking factor- people usually drink more at night than the day. In addition to this, meals at dinner are usually more expensive than lunch, accumulating a higher total, and thus, a higher tip. 

Ultimately, according to this data, the best shifts to schedule to make the most tips are Sunday Night, Friday Night, and Saturday Night, respectively, with Thursday day, coming in a the fourth best option.


